(function framework7ComponentLoader(o,e){void 0===e&&(e=!0);document,window;var E=o.$,B=(o.Template7,o.utils),x=(o.device,o.support),t=(o.Class,o.Modal),a=(o.ConstructorMethods,o.ModalMethods),p=function(M){function o(p,o){var e=B.extend({on:{}},p.params.popup,o);M.call(this,p,e);var a,t,s=this;if(s.params=e,(a=s.params.el?E(s.params.el):E(s.params.content))&&0<a.length&&a[0].f7Modal)return a[0].f7Modal;if(0===a.length)return s.destroy();function r(o){var e=o.target,t=E(e);if(!(!p.device.desktop&&p.device.cordova&&(window.Keyboard&&window.Keyboard.isVisible||window.cordova.plugins&&window.cordova.plugins.Keyboard&&window.cordova.plugins.Keyboard.isVisible))&&0===t.closest(s.el).length&&s.params&&s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===e){var a=!0;s.$el.nextAll(".popup.modal-in").each(function(o,e){var t=e.f7Modal;t&&t.params.closeByBackdropClick&&t.params.backdrop&&t.backdropEl===s.backdropEl&&(a=!1)}),a&&s.close()}}function n(o){27===o.keyCode&&s.params.closeOnEscape&&s.close()}s.params.backdrop&&s.params.backdropEl?t=E(s.params.backdropEl):s.params.backdrop&&0===(t=p.root.children(".popup-backdrop")).length&&(t=E('<div class="popup-backdrop"></div>'),p.root.append(t)),B.extend(s,{app:p,$el:a,el:a[0],$backdropEl:t,backdropEl:t&&t[0],type:"popup"}),s.params.closeOnEscape&&(s.on("popupOpen",function(){E(document).on("keydown",n)}),s.on("popupClose",function(){E(document).off("keydown",n)})),s.on("popupOpened",function(){a.removeClass("swipe-close-to-bottom swipe-close-to-top"),s.params.closeByBackdropClick&&p.on("click",r)}),s.on("popupClose",function(){s.params.closeByBackdropClick&&p.off("click",r)});var c,i,l,d,u,m,f,v,h,k=!0,y=!1,b=!1;function w(o){!y&&k&&(s.params.swipeToCloseHandler&&0===E(o.target).closest(s.params.swipeToCloseHandler).length||(b=!(y=!0),c={x:"touchstart"===o.type?o.targetTouches[0].pageX:o.pageX,y:"touchstart"===o.type?o.targetTouches[0].pageY:o.pageY},d=B.now(),l=void 0,s.params.swipeToCloseHandler||"touchstart"!==o.type||(m=E(o.target).closest(".page-content")[0])))}function g(o){if(y)if(i={x:"touchmove"===o.type?o.targetTouches[0].pageX:o.pageX,y:"touchmove"===o.type?o.targetTouches[0].pageY:o.pageY},void 0===l&&(l=!!(l||Math.abs(i.x-c.x)>Math.abs(i.y-c.y))),l)b=y=!1;else{var e=(u=c.y-i.y)<0?"to-bottom":"to-top";if(a.transition(0),"string"!=typeof s.params.swipeToClose||e===s.params.swipeToClose){if(!b){if(m&&(f=m.scrollTop,h=m.scrollHeight,v=m.offsetHeight,!(h===v||"to-bottom"===e&&0===f||"to-top"===e&&f===h-v)))return a.transform(""),void(b=y=!1);b=!0}o.preventDefault(),a.transition(0).transform("translate3d(0,"+-u+"px,0)")}else a.transform("")}}function C(){if(y=!1,b){k=b=!1,a.transition("");var o=u<0?"to-bottom":"to-top";if("string"==typeof s.params.swipeToClose&&o!==s.params.swipeToClose)return a.transform(""),void(k=!0);var e=Math.abs(u),t=(new Date).getTime()-d;t<300&&20<e||300<=t&&100<e?B.nextTick(function(){"to-bottom"===o?a.addClass("swipe-close-to-bottom"):a.addClass("swipe-close-to-top"),a.transform(""),s.close(),k=!0}):(k=!0,a.transform(""))}}var T=!!x.passiveListener&&{passive:!0};return s.params.swipeToClose&&(a.on(p.touchEvents.start,w,T),p.on("touchmove",g),p.on("touchend:passive",C),s.once("popupDestroy",function(){a.off(p.touchEvents.start,w,T),p.off("touchmove",g),p.off("touchend:passive",C)})),a[0].f7Modal=s}return M&&(o.__proto__=M),(o.prototype=Object.create(M&&M.prototype)).constructor=o}(t),s={name:"popup",params:{popup:{backdrop:!0,closeByBackdropClick:!0,swipeToClose:!1,swipeToCloseHandler:null}},static:{Popup:p},create:function(){this.popup=a({app:this,constructor:p,defaultSelector:".popup.modal-in"})},clicks:{".popup-open":function(o,e){void 0===e&&(e={});this.popup.open(e.popup,e.animate)},".popup-close":function(o,e){void 0===e&&(e={});this.popup.close(e.popup,e.animate)}}};if(e){if(o.prototype.modules&&o.prototype.modules[s.name])return;o.use(s),o.instance&&(o.instance.useModuleParams(s,o.instance.params),o.instance.useModule(s))}return s}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))